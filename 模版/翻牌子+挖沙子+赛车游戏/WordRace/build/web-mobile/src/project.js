require=function e(t,o,c){function n(s,a){if(!o[s]){if(!t[s]){var r="function"==typeof require&&require;if(!a&&r)return r(s,!0);if(i)return i(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var h=o[s]={exports:{}};t[s][0].call(h.exports,function(e){var o=t[s][1][e];return n(o||e)},h,h.exports,e,t,o,c)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<c.length;s++)n(c[s]);return n}({Config:[function(e,t,o){"use strict";cc._RF.push(t,"55a24YSwX9IIKdwgTK8Lrpl","Config"),window.CONSOLE_LOG_OPEN=!0,window.OPTION_BLANK=!0,document.addEventListener("resignActivePauseGame",function(){cc.director.pause(),cc.game.pause(),console.log("app just resign active.")}),document.addEventListener("becomeActiveResumeGame",function(){cc.game.isPaused&&cc.game.resume(),cc.director.isPaused&&cc.director.resume(),console.log("app just become active.")}),cc._RF.pop()},{}],GameData:[function(e,t,o){"use strict";cc._RF.push(t,"805c9+GqEtHZqKwuNyr4Kdf","GameData"),cc.Class({extends:cc.Component,properties:{collectNum:0,missNum:0,isWin:!0,isFirst:!0,Music:cc.AudioClip,audioSource:cc.AudioSource},onLoad:function(){this.wordList=[],this.network=this.node.getComponent("Network"),this.network.sendXHR(this)},startLoadGame:function(e){this.audioSource.play(),cc.audioEngine.play(this.Music,!0,.1),this.questionArr=e,this.initAnswerInfo(e),this.startDate=new Date},setIsFirst:function(e){this.isFirst=e},getWordList:function(){return this.questionArr},getQuestionArray:function(){return this.questionArr},initAnswerInfo:function(e){this.answerInfoArr=[];for(var t=0;t<e.length;t++){var o=e[t],c={answerTime:"0",leveLQuestionDetailNum:o.leveLQuestionDetailNum,levelQuestionDetailID:o.levelQuestionDetailID,answerStatus:"2",answerContext:""};this.answerInfoArr.push(c)}},setAnswerInfo:function(e,t,o,c){var n=this.answerInfoArr[e];n.answerTime=t,n.answerStatus=o,n.answerContext=c},setGameData:function(e,t){this.collectNum=e,this.missNum=t;var o=parseInt(e)/(parseInt(e)+parseInt(t));this.isWin=o>=.6},gameOver:function(){cc.audioEngine.stopAll(),cc.audioEngine.uncacheAll();var e=(new Date).getTime()-this.startDate.getTime();this.network.gameOver(Math.round(e/1e3),this.answerInfoArr)}}),cc._RF.pop()},{}],GameOver:[function(e,t,o){"use strict";cc._RF.push(t,"a9e32P30/hMg7HJTjMVyePI","GameOver"),cc.Class({extends:cc.Component,properties:{winBG:cc.Node,lostBG:cc.Node,winTips:cc.Node,lostTips:cc.Node,collectLabel:cc.Label,missLabel:cc.Label,winHeader:cc.Node,winRightHand:cc.Node,winLeftHand:cc.Node,lostHeader:cc.Node,animNode:cc.Node},onLoad:function(){var e=cc.director.getScene().getChildByName("GameData").getComponent("GameData");this.gameDataJs=e,e&&e.isWin?(this.winBG.active=!0,this.lostBG.active=!1,this.winAnim()):(this.winBG.active=!1,this.lostBG.active=!0,this.lostAnim()),this.nomalAnim(),this.collectLabel.string="collected:"+e.collectNum,this.missLabel.string="missed:"+e.missNum,this.gameDataJs.gameOver()},nomalAnim:function(){this.animNode.getChildByName("Clock").runAction(cc.spawn(cc.sequence(cc.rotateTo(.2,-13),cc.rotateTo(.16,13),cc.rotateTo(.16,0)),cc.sequence(cc.scaleTo(.16,1.2),cc.scaleTo(.08,1)))),this.animNode.getChildByName("TimeUp").runAction(cc.sequence(cc.moveTo(.2,cc.p(1463,45)),cc.moveTo(.2,cc.p(1463,-543)),cc.moveTo(.12,cc.p(1463,-537))))},winAnim:function(){this.winBG.getChildByName("header").runAction(cc.repeatForever(cc.sequence(cc.delayTime(2),cc.moveTo(.2,cc.p(465,-373)),cc.moveTo(.2,cc.p(465,-360)),cc.moveTo(.2,cc.p(465,-373)),cc.moveTo(.2,cc.p(465,-360))))),this.winRightHand.runAction(cc.repeatForever(cc.sequence(cc.delayTime(2),cc.rotateTo(.2,24),cc.rotateTo(.2,-1),cc.rotateTo(.2,24),cc.rotateTo(.2,-1)))),this.winLeftHand.runAction(cc.repeatForever(cc.sequence(cc.delayTime(2),cc.rotateTo(.2,-23),cc.rotateTo(.2,5),cc.rotateTo(.2,-23),cc.rotateTo(.2,5)))),this.winHeader.getChildByName("left_ brow").runAction(cc.repeatForever(cc.sequence(cc.moveTo(.36,cc.p(-80,111)),cc.moveTo(.16,cc.p(-80,127)),cc.moveTo(.16,cc.p(-80,111)),cc.moveTo(.16,cc.p(-80,127)),cc.moveTo(.16,cc.p(-80,111)),cc.delayTime(2)))),this.winHeader.getChildByName("right_ brow").runAction(cc.repeatForever(cc.sequence(cc.moveTo(.36,cc.p(80,110)),cc.moveTo(.16,cc.p(80,127)),cc.moveTo(.16,cc.p(80,110)),cc.moveTo(.16,cc.p(80,127)),cc.moveTo(.16,cc.p(80,110)),cc.delayTime(2)))),this.winTips.runAction(cc.sequence(cc.scaleTo(.44,0),cc.scaleTo(.24,1.2),cc.scaleTo(.12,.95),cc.scaleTo(.12,1)))},lostAnim:function(){this.lostHeader.getChildByName("lost_left_brow").runAction(cc.repeatForever(cc.sequence(cc.moveTo(.44,cc.p(-80,111)),cc.moveTo(.28,cc.p(-80,127)),cc.moveTo(.28,cc.p(-80,111)),cc.delayTime(2)))),this.lostHeader.getChildByName("lost_right_brow").runAction(cc.repeatForever(cc.sequence(cc.moveTo(.44,cc.p(80,110)),cc.moveTo(.28,cc.p(80,127)),cc.moveTo(.28,cc.p(80,110)),cc.delayTime(2)))),this.lostTips.runAction(cc.sequence(cc.scaleTo(.44,0),cc.scaleTo(.24,1.2),cc.scaleTo(.12,.95),cc.scaleTo(.12,1)))},playAgain:function(){cc.director.loadScene("WordRace")},review:function(){cc.director.loadScene("ShowWord")},nextGame:function(){this.node.pauseSystemEvents(!0)}}),cc._RF.pop()},{}],GameStart:[function(e,t,o){"use strict";cc._RF.push(t,"c8b37JrgftHIqtBJYwPmFST","GameStart"),cc.Class({extends:cc.Component,properties:{gameData:cc.Node},onLoad:function(){cc.game.addPersistRootNode(this.gameData)},startClick:function(){cc.director.loadScene("ShowWord")}}),cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"b43a9dhfCNEV7NwZp4tLqgW","Game"),cc.Class({extends:cc.Component,properties:{wordImage:cc.Node,collect:cc.Label,word:cc.Label,miss:cc.Label,feedback:cc.Node,raceAnim:cc.Animation,treeNode:cc.Node,roadAnim:cc.Animation,help:cc.Node,progressBar:cc.Node,progressPref:cc.Prefab,balloon:{default:null,type:cc.Node}},onLoad:function(){var e=cc.director.getScene().getChildByName("GameData").getComponent("GameData");this.questionArray=e.getQuestionArray(),this.gameDataJs=e,this.nowWordNum=0,this.collect.string="0",this.word.string="",this.miss.string="0",this.runTime=3,this.showTime=1.5,this.nowQuestion=null,this.rightAnswer="",this.raceAnim.play(),this.roadAnim.play(),this.treeNode.getComponent("TreeRun").treeStartRun();for(var t=0;t<this.questionArray.length;t++){var o=cc.instantiate(this.progressPref);o.tag=t,this.progressBar.addChild(o)}var c=cc.p(this.balloon.x,this.balloon.y),n=cc.moveTo(1.5,cc.p(c.x+63,c.y)),i=cc.moveTo(1.5,c);this.balloon.runAction(cc.repeatForever(cc.sequence(n,i))),this.startGame()},startGame:function(){this.scheduleOnce(function(){this.loadGame()},5)},loadGame:function(){var e=this.questionArray[this.nowWordNum];this.rightAnswer=e.rightAnswer,this.word.string=e.qescont;var t=e.interactiveJson.runTime,o=e.interactiveJson.showTime;parseFloat(t)>0&&(this.runTime=parseFloat(t)),parseFloat(o)>0&&(this.showTime=parseFloat(o)),e.quescontsound&&this.playAudio(e.quescontsound),this.startShowWord(e.optionsArr),this.balloon.getChildByName("labelOnBalloon").active=!0,cc.find("Balloon/labelOnBalloon",this.node).getComponent(cc.Label).string=e.qescont},playAudio:function(e){cc.audioEngine.stop(this.nowAudio);var t=this;cc.loader.load(e,function(e,o){e||(t.nowAudio=cc.audioEngine.play(o,!1,1))})},playResAudio:function(e){cc.audioEngine.stop(this.nowAudio);var t=this;cc.loader.loadRes("audio/"+e,cc.AudioClip,function(e,o){e||(t.nowAudio=cc.audioEngine.play(o,!1,1))})},startShowWord:function(e){this.scheduleOnce(function(){this.wordImage.getComponent("WordManager").showWordImage(this,e,this.runTime)},2)},showWordFinish:function(){var e=this.node.getComponent("RaceMove").getNowLane(),t=null;if(e==this.rightAnswer){this.gameDataJs.setAnswerInfo(this.nowWordNum,this.runTime,"1",e),this.collect.string=parseInt(this.collect.string)+1;var o=["excellent","perfect","amazing"];this.playResAudio(o[Math.floor(3*Math.random())]),t=this.feedback.getComponent(cc.Animation).play("Collect"),this.setProgressImage("right")}else this.gameDataJs.setAnswerInfo(this.nowWordNum,this.runTime,"2",e),this.miss.string=parseInt(this.miss.string)+1,this.playResAudio("miss"),t=this.feedback.getComponent(cc.Animation).play("Miss"),this.setProgressImage("wrong");return t.speed=t.duration/this.showTime,this.scheduleOnce(function(){this.showFeedbackFinish()},this.showTime),e},showFeedbackFinish:function(){this.nowWordNum+=1,this.nowWordNum>=this.questionArray.length?(cc.director.getScene().getChildByName("GameData").getComponent("GameData").setGameData(this.collect.string,this.miss.string),cc.director.loadScene("GameOver")):this.loadGame()},setProgressImage:function(e){var t=this.progressBar.getChildByTag(this.nowWordNum).getComponent(cc.Sprite);cc.loader.loadRes("status/"+e,cc.SpriteFrame,function(e,o){e||(t.spriteFrame=o)})},goBackClick:function(){cc.director.loadScene("ShowWord")},onDestroy:function(){cc.audioEngine.stop(this.nowAudio)}}),cc._RF.pop()},{}],Help:[function(e,t,o){"use strict";cc._RF.push(t,"796e7zU0VtNvZXCnNmyhJQK","Help"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.scheduleOnce(function(){cc.director.loadScene("WordRace")},3)}}),cc._RF.pop()},{}],Network:[function(e,t,o){"use strict";cc._RF.push(t,"23cc1NE+qRPwrBEWo1GpD51","Network"),cc.Class({extends:cc.Component,properties:{},GetQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);return null!=o?decodeURI(o[2]):null},sendXHR:function(e){this.target=e;var t=cc.loader.getXMLHttpRequest();this.streamXHREventsToLabel(t,"GET");var o=this.GetQueryString("fileUrl");t.open("GET",o),cc.sys.isNative&&t.setRequestHeader("Accept-Encoding","gzip,deflate"),t.timeout=6e4,t.send()},streamXHREventsToLabel:function(e,t,o){var c=o||function(e){return t+" Response: "+e.substring(0,30)+"..."},n=this;e.onreadystatechange=function(){try{e.readyState===XMLHttpRequest.DONE&&(CONSOLE_LOG_OPEN&&console.log(c(e.responseText)),200===e.status||0===e.status?n.analysisData(e.responseText):(CONSOLE_LOG_OPEN&&console.log("There was a problem with the request."),n.gameLoadFailed(1)))}catch(e){CONSOLE_LOG_OPEN&&console.log("Caught Exception: "+e.description),n.gameLoadFailed(1)}}},analysisData:function(e){var t=JSON.parse(e);if(t&&t.length>0){for(var o=[],c=0;c<t.length;++c){var n=this.analysisDict(t[c]);o.push(n)}o&&o.length>0?(this.target.startLoadGame(o),this.gameLoadSuccess(o.length)):this.gameLoadFailed(2)}else this.gameLoadFailed(2)},analysisDict:function(e){var t=e.interactiveJson;if(t&&0!=t.length){"string"==typeof t&&(t=JSON.parse(t));for(var o=e.optionandanswers[0],c=o.options,n=[],i=0;i<c.length;++i){var s=c[i],a={optionNo:s.optionno,optioncontimg:s.optioncontimg};n.push(a)}if(n||n.length>0)return{answerTime:"0",levelQuestionDetailID:e.questionid,leveLQuestionDetailNum:e.orderid,qescont:this.removeSpan(e.qescont),quescontimg:e.quescontimg,quescontsound:e.quescontsound[0],optionsArr:n,rightAnswer:this.removeSpan(o.rightanswer),interactiveJson:t};this.gameLoadFailed(2)}else this.gameLoadFailed(2)},removeSpan:function(e){var t=e.replace("<span>","");return t=t.replace("</span>","")},gameLoadFailed:function(e){if(OPTION_BLANK)if(1==e){t=encodeURI("errcode=10001&errmsg=下载失败");window.location.href="optionBlank://gameLoadFailed?"+t}else{var t=encodeURI("errcode=10002&errmsg=解析失败");window.location.href="optionBlank://gameLoadFailed?"+t}},gameLoadSuccess:function(e){if(OPTION_BLANK){var t=encodeURI("isShow=0&totalNumber="+e);window.location.href="optionBlank://gameLoadSuccess?"+t}},gameOver:function(e,t){var o=JSON.stringify(t);if(CONSOLE_LOG_OPEN&&console.log("dataJson="+JSON.stringify(t)),OPTION_BLANK){var c=encodeURI("&totalTime="+e+"&data="+o);window.location.href="optionBlank://gameOver?status=1"+c}},gameLoadProgress:function(e,t){if(OPTION_BLANK){var o=encodeURI("nowNumber="+e+"&totalNumber="+t);window.location.href="optionBlank://gameLoadProgress?"+o}}}),cc._RF.pop()},{}],RaceMove:[function(e,t,o){"use strict";cc._RF.push(t,"7328dVbP1FDsZR8UFPkcNlh","RaceMove"),cc.Class({extends:cc.Component,properties:{race:cc.Node,canMove:!1},onLoad:function(){this.canMove=!0,this.nowlane="B",this.time=.25,this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove.bind(this))},touchMove:function(e){this.canMove&&this.changeRacePositionForMove(e)},changeRacePositionForMove:function(e){this.canMove=!1,this.scheduleOnce(function(){this.canMove=!0},.05);var t=e.getTouches()[0],o=this.node.convertTouchToNodeSpaceAR(t);o.y<0&&o.y>-628&&(Math.abs(o.x)<=210?(this.race.runAction(cc.spawn(cc.moveTo(.05,cc.p(0,-389)),cc.skewTo(.05,0,0))),this.nowlane="B"):Math.abs(o.x)<=700&&(o.x>0?(this.race.runAction(cc.spawn(cc.moveTo(.05,cc.p(410,-389)),cc.skewTo(.05,-15,15))),this.nowlane="C"):(this.race.runAction(cc.spawn(cc.moveTo(.05,cc.p(-410,-389)),cc.skewTo(.05,15,-15))),this.nowlane="A")))},touchEnd:function(e){this.canMove&&this.changeRacePosition(e)},changeRacePosition:function(e){this.canMove=!1,this.scheduleOnce(function(){this.canMove=!0},this.time);var t=e.getTouches()[0],o=this.node.convertTouchToNodeSpaceAR(t);o.y<0&&o.y>-628&&(Math.abs(o.x)<=210?(this.race.runAction(cc.spawn(cc.moveTo(this.time,cc.p(0,-389)),cc.skewTo(this.time,0,0))),this.nowlane="B"):Math.abs(o.x)<=700&&(o.x>0?(this.race.runAction(cc.spawn(cc.moveTo(this.time,cc.p(410,-389)),cc.skewTo(this.time,-15,15))),this.nowlane="C"):(this.race.runAction(cc.spawn(cc.moveTo(this.time,cc.p(-410,-389)),cc.skewTo(this.time,15,-15))),this.nowlane="A")))},getNowLane:function(){return this.nowlane}}),cc._RF.pop()},{}],ShowWord:[function(e,t,o){"use strict";cc._RF.push(t,"8f235WaUZBOl4hN5GsSRl2c","ShowWord"),cc.Class({extends:cc.Component,properties:{wordList:cc.Node,optionPref:cc.Prefab,label:cc.Label,audio:cc.AudioClip},preloadGameStartFinish:function(){},onLoad:function(){cc.director.preloadScene("GameStart",this.preloadGameStartFinish),this.nowAudio=cc.audioEngine.play(this.audio,!1,1),this.lastWord=null,this.gameData=cc.director.getScene().getChildByName("GameData").getComponent("GameData");for(var e=this.gameData.getWordList(),t=0;t<e.length;t++){var o=e[t],c=cc.instantiate(this.optionPref);c.getComponent("WordOption").init(this,o),this.wordList.addChild(c)}},selectWord:function(e,t,o){this.label.string=t,this.playAudio(o),this.lastWord&&this.lastWord.setBackgroundSprite("white_line"),this.lastWord=e},playAudio:function(e){this.nowAudio&&cc.audioEngine.stop(this.nowAudio);var t=this;cc.loader.load(e,function(e,o){e||(t.nowAudio=cc.audioEngine.play(o,!1,1))})},goBackClick:function(){cc.director.loadScene("GameStart")},startClick:function(){cc.director.loadScene("WordRace")},onDestroy:function(){cc.audioEngine.stop(this.nowAudio)}}),cc._RF.pop()},{}],TreeRun:[function(e,t,o){"use strict";cc._RF.push(t,"bae332o3LpHm7DaMzrERItV","TreeRun"),cc.Class({extends:cc.Component,properties:{},treeStartRun:function(){for(var e=1;e<=9;e++)this.treeRunAnim(e)},treeRunAnim:function(e){var t="Tree"+e,o=this.node.getChildByName(t);o.activeInHierarchy&&o.getComponent(cc.Animation).play(t,.2*e)}}),cc._RF.pop()},{}],WordManager:[function(e,t,o){"use strict";cc._RF.push(t,"383d8II9etMzodryl8HuXbE","WordManager"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},showWordImage:function(e,t,o){this.target=e;for(var c=0;c<this.node.children.length;c++){var n=this.node.children[c];if(n.opacity=0,t[c]){var i=t[c].optioncontimg;i&&this.loadWordImage(n,i)}}var s=this.node.getComponent(cc.Animation).play();s.speed=s.duration/o},loadWordImage:function(e,t){cc.loader.load(t,function(t,o){t||(e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),e.opacity=255)})},animFinish:function(){var e=this.target.showWordFinish(),t=this.node.getChildByName(e);t&&(t.opacity=0)}}),cc._RF.pop()},{}],WordOption:[function(e,t,o){"use strict";cc._RF.push(t,"50913brd8ZBLIj0PegVLR9Q","WordOption"),cc.Class({extends:cc.Component,properties:{imageSprite:cc.Sprite},onLoad:function(){},init:function(e,t){this.target=e,this.wordName=t.qescont,this.audioUrl=t.quescontsound;var o=this;cc.loader.load(t.quescontimg[0],function(e,t){e||(o.imageSprite.spriteFrame=new cc.SpriteFrame(t))})},optionClick:function(){this.target.selectWord(this,this.wordName,this.audioUrl),this.setBackgroundSprite("white_back")},setBackgroundSprite:function(e){var t=this;cc.loader.loadRes("word/"+e,cc.SpriteFrame,function(e,o){e||(t.node.getComponent(cc.Sprite).spriteFrame=o)})}}),cc._RF.pop()},{}]},{},["Config","Game","GameData","GameOver","GameStart","Help","Network","RaceMove","ShowWord","TreeRun","WordManager","WordOption"]);